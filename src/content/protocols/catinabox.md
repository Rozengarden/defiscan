---
protocol: "CatInABox"
website: "https://catinabox.finance"
x: "https://x.com/catinaboxfi"
github: ["https://github.com/catinaboxfinance/cat-in-a-box-protocol"]
defillama_slug: ["cat-in-a-box"]
chain: "Ethereum Mainnet"
stage: 0
reason: ["no alternative front-end"]
risks: ["L", "M", "M", "M", "H"]
author: ["Alice Rozengarden"]
submission_date: "1970-01-01"
publish_date: "1970-01-01"
acknowledge_date: "1970-01-01"
update_date: "1970-01-01"
---

# Summary

Cat in a Box is a CDP protocol that allow to an user to mint synthetic ether (called BoxETH) backed by said-users-deposited stETH up to a 100% LTV. Instead of charging a borrowing rate the protocol take a share of the stETH yield and redistribute some of it back to the depositor depending on their effective Collateral ratio, incentivizing either low CR or high CR depending on user choice (called v1 and v1.1 respectively).

# Overview

## Chain

Cat in a Box is deployed on Ethereum mainnet.

> Chain score: L

## Upgradeability

An undeclared multisig is controling the fee charged by the protocol:

On v1 the fee can be set between 25 and 100% while it can be set between 0 and 99% on v1.1. This can be used to collect close to all the stETH yield generated by borrowers. And while in v1 all those fee end up in the BoxFEE staker pocket, in v1.1 half goes to the PiL module which is currently the same team multisig. This could be considered as a loss of all future yield for borrowers. Moreover due to implementation details those fee change are retractive and applied from the last time someone interacted with the protocol.

## Autonomy

While the protocol doesn't rely on any oracle, some function need assistance from the team, such as:

- Half of the fee from the v1.1 protocol are used to incentivize BoxETH liquidity, however this operation is fully done by hand by the team and can't be considered autonomous, this operation doesn't have any fail safe and in case of problem those incentives fund would stay stuck forever leading to degraded liquidity. Such a lack of liquidity make the protocol less attractive for new users and increase the risk of redemption for already existing users.

- Fee received in the form of stETH need to be converted to BoxETH to be distributed to BoxFEE staker, to do this the `trade` function need to be called, as of this writting only the team multisig and deployer can do this operation, thus this operation cannot be considered autonomous and should problems arise could result in a chunk of the reward to staker being stuck forever. 

> Autonomy score: M

## Exit Window

Currently the protocol have a "Medium" risk score for upgradeability and no exit window or timelock on any permission.

> Exit Window score: M

## Accessibility

The only front end for the protocol is available at `https://catinabox.finance/app`, no self-hostable front end is provided on github nor is any tutorial on using the protocol through etherscan in the doc.

> Accessibility score: H

# Technical Analysis

## Contracts

| Contract Name          | Address                                    |
| --------------------   | ------------------------------------------ |
| CatInABox v1           | 0x7f0A0C7149a46Bf943cCd412da687144b49C6014 |
| CatInABox v1.1         | 0x6ffD098E92B606b2947b89A08911C00ca06890FA |
| BoxETH                 | 0x7690202e2C2297bcD03664e31116d1dFfE7e3B73 |
| Peg Stability Module   | 0x24146D1B3339Cf76b455dC42e71Ea5Cdff4aE0d7 |
| BoxFEE                 | 0xE4B91fAf8810F8895772E7cA065D4CB889120f94 |
| BoxFEE staking contract| 0x320c871b6f7721083604FfdD8070E64c1d3c5d7C |

## Permission owners

| Name                                | Account                                       | Type         |
| ----------------------------------- | --------------------------------------------- | ------------ |
| Undeclared Multisig (Team Treasury) | [0x98e6475C01D018Ae78c02ef48738f687538226Af](https://etherscan.io/address/0x98e6475C01D018Ae78c02ef48738f687538226Af) | Multisig 3/5 |
| Undeclared EOA (Team Deployer)      | [0x56C40ade4C96800b13E20A71Ff60c4005F0bCF8e](https://etherscan.io/address/0x56C40ade4C96800b13E20A71Ff60c4005F0bCF8e) | EOA          |

## Permissions

| Contract       | Function           | Impact                                                                             | Owner                     |
| -------------- | ------------------ | ---------------------------------------------------------------------------------- | ------------------------- |
| CIAB v1        | setFee             | Change the protocol fee between 25 and 100% of the generated yield                   | Undeclared Multisig       |
| CIAB v1        | grantRole          | Grant any role to any address                                                      | Undeclared Multisig       |
| CIAB v1        | revokeRole         | Remove any role any address                                                        | Undeclared Multisig       |
| CIAB v1.1      | setFee             | Change the protocol fee between 1 and 99% of the generated yield                   | Undeclared Multisig       |
| CIAB v1.1      | setMintingFee      | Change the loan origination fee between 0 and .5%                                  | Undeclared Multisig       |
| CIAB v1.1      | grantRole          | Grant any role to any address                                                      | Undeclared Multisig       |
| CIAB v1.1      | revokeRole         | Remove any role any address                                                        | Undeclared Multisig       |
| CIAB v1.1      | setFeeSplitAddress | Set the receiver of the protocol fee                                               | Undeclared Multisig       |
| CIAB v1.1      | setIncentiveModule | Set the receiver of the protocol fee used to incentivize liquidity                 | Undeclared Multisig       |
| CIAB v1.1      | setpsm             | Set the address of the peg stability module                                        | Undeclared Multisig       |
| BoxETH         | mint               | mint boxETH token                                                                  | CIAB v1 and v1.1          |
| BoxETH         | grantRole          | Grant any role to any address                                                      | CIAB v1 and v1.1 (can't make use of it) |
| BoxETH         | revokeRole         | Remove any role any address                                                        | CIAB v1 and v1.1 (can't make use of it) |
| PSM            | grantRole          | Grant any role to any address                                                      | Undeclared Multisig       |
| PSM            | revokeRole         | Remove any role any address                                                        | Undeclared Multisig       |
| PSM            | trade              | Exchange 1:1 BoxETH for stETH in the PSM                                           | Undeclared Multisig       |
| PSM            | synthToFeeToken    | Convert the BoxETH in the PSM for BoxFEE and send it to the treasury               | Undeclared Multisig       |
| PSM            | setTreasury        | Sets the address of the treasury                                                   | Undeclared Multisig       |
| PSM            | setFeeToken        | Sets the address of the contract who receive BoxETH when synthToFeeToken is called | Undeclared Multisig       |
| boxFEE staking | grantRole          | Grant any role to any address                                                      | Undeclared EOA            |
| boxFEE staking | revokeRole         | Remove any role any address                                                        | Undeclared EOA            |
| boxFEE staking | trade              | Exchange 1:1 BoxETH for stETH in the staking module                                | Undeclared Multisig & EOA |

## Dependencies

Fund for liquidity incentives are sent straight to the team treasury and any incentive campaign is done by hand.

## Exit Window

No timelocks have been found protecting the various permissioned functions in the protocol. All updates take effect immediately and potentialy retroactively for fee change.

# Security Council

| Undeclared Multisig | Undeclared EAO | Requirement                                             |
| ------------------- | -------------- | ------------------------------------------------------- |
|          ❌         |       ❌       | At least 7 signers                                      |
|          ❌         |       ❌       | At least 51% threshold                                  |
|          ❌         |       ❌       | At least 50% non-team signers                           |
|          ❌         |       ❌       | Signers are publicly announced (with name or pseudonym) |
